import os
import wget
import csv
#import ember
import numpy as np
import pandas as pd

'''
data_dir = "../ember_dataset/"

#emberdf = ember.create_metadata(data_dir)
emberdf = ember.read_metadata(data_dir)
#X_train, y_train, X_test, y_test = ember.create_vectorized_features(data_dir)
X_train, y_train, X_test, y_test = ember.read_vectorized_features(data_dir)

X = np.concatenate((X_train, X_test))
y = np.concatenate((y_train, y_test))
df = pd.concat([emberdf, pd.DataFrame(X)], axis=1)

mal_sha256 = df[df.label == 1].sha256

#print(mal_sha256)
'''
start_downloading = False
with open("mal_sha256.csv", "r") as infile:
    reader = csv.reader(infile, delimiter=',')

    for row in reader:
        #print(row[1])
        if row[1] == "241ddba7f8ec4bc9b68030fb9274cf0e8c71989f6f85d53fc413c465b68d3597":
            start_downloading = True
        if start_downloading:
            print(row[1])
            cmd = "wget --user infected --password infected http://www.virusign.com/file/%s.7z -P mal_binaries/" % (row[1])
            #url = "http://www.virusign.com/file/%s.7z" % (row)
            #wget.download(url,out="../data/")
            os.system(cmd)
